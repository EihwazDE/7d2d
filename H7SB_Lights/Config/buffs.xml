<!-- - - - - - - - - - - -
#########################
###### H7SB Lights ######
### 7 Days to Die Mod ###
#########################
####### Eihwaz Â© ########
##### www.eihwaz.de #####
#### CC BY-NC-ND-SA #####
#########################
- - - - - - - - - - - -->
<eihwaz.de>  <append xpath="/buffs/buff[@name='buffStatusCheck01']"> <effect_group name="add power"> <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="powerCheckCVar" operation="add" value="1"> <requirement name="CVarCompare" cvar="onOffCVar" operation="Equals" value="0"/> <requirement name="CVarCompare" cvar="powerCheckCVar" operation="LT" value="540"/> </triggered_effect> </effect_group> <effect_group name="batteryCheck"> <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="batteryCheck"> <requirement name="!HasBuff" buff="batteryCheck"/> </triggered_effect> </effect_group> </append>  <append xpath="/buffs"> <buff name="batteryCheck" name_key="lightCheck" description_key="lightCheckDesc" icon="ui_game_symbol_battery" icon_color="253,253,150" showonhud="false"> <stack_type value="ignore"/> <duration value="0"/> <display_value value="powerCheckCVar"/><display_value_format value="time"/> </buff> </append>  <append xpath="/buffs"> <buff name="lightCheck" name_key="lightCheck" description_key="lightCheckDesc" icon="ui_game_symbol_battery" icon_color="253,253,150"> <stack_type value="ignore"/> <duration value="0"/> <display_value value="powerCheckCVar"/><display_value_format value="time"/> <effect_group name="main"> <passive_effect name="BuffResistance" operation="base_add" value="5" tags="batteryCheck"/> <triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="batteryCheck"/> </effect_group> <effect_group name="subtract power"> <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="powerCheckCVar" operation="subtract" value="1"> <requirement name="CVarCompare" cvar="onOffCVar" operation="Equals" value="1"/> <requirement name="CVarCompare" cvar="powerCheckCVar" operation="GTE" value="1"/> </triggered_effect> <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="onOffCVar" operation="set" value="0"> <requirement name="CVarCompare" cvar="powerCheckCVar" operation="Equals" value="0"/> </triggered_effect> </effect_group> <effect_group name="flashlight"> <requirement name="HoldingItemHasTags" tags="flashlight"/> <triggered_effect trigger="onSelfBuffUpdate" action="SetTransformActive" active="true" parent_transform="#HeldItemRoot" transform_path="lightSource"> <requirement name="CVarCompare" cvar="onOffCVar" operation="Equals" value="1"/> </triggered_effect> <triggered_effect trigger="onSelfBuffUpdate" action="SetTransformActive" active="false" parent_transform="#HeldItemRoot" transform_path="lightSource"> <requirement name="CVarCompare" cvar="onOffCVar" operation="Equals" value="0"/> </triggered_effect> </effect_group> </buff> </append>   <append xpath="/buffs/buff[@name='buffStatusCheck01']"> <effect_group> <requirement name="CVarCompare" cvar="powerCheckCVar" operation="GTE" value="180"/> <triggered_effect trigger="onSelfAttackedOther" action="AddBuff" target="other" buff="h7sb_buffTurretLight"> <requirement name="EntityTagCompare" target="other" tags="turretLight"/> </triggered_effect> <triggered_effect trigger="onSelfAttackedOther" action="ModifyCVar" cvar="powerCheckCVar" operation="subtract" value="180"> <requirement name="EntityTagCompare" target="other" tags="turretLight"/> </triggered_effect> </effect_group> </append>  <append xpath="/buffs"> <buff name="h7sb_buffTurretLight" hidden="true"> <stack_type value="replace"/> <duration value="0"/> <update_rate value="2"/> <effect_group name="main"> <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="turretLightCVar" operation="set" value="180"/> <triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="turretLightCVar" operation="add" value="180"/> <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="turretLightCVar" operation="subtract" value="1"> <requirement name="CVarCompare" cvar="turretLightCVar" operation="GTE" value="1"/> </triggered_effect> <triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="h7sb_buffTurretLight"> <requirement name="CVarCompare" cvar="turretLightCVar" operation="LTE" value="0"/> </triggered_effect> <triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="turretLightCVar" operation="set" value="0"/>  <triggered_effect trigger="onSelfBuffStart" action="PlaySound" sound="wire_live_break"/> <triggered_effect trigger="onSelfBuffStack" action="PlaySound" sound="wire_live_break"/> <triggered_effect trigger="onSelfBuffRemove" action="PlaySound" sound="wire_live_connect"/> </effect_group> <effect_group name="visual"> <triggered_effect trigger="onSelfBuffStart" action="AddPart" part="turretLight"  localPos="0,0.4,-0.1" localRot="0,0,0" prefab="#Other/Items?Mods/Sides/side_attachment_flashlightPrefab.prefab" parent_transform="Muzzle" /> <triggered_effect trigger="onSelfBuffStart" action="SetTransformActive" active="true"  parent_transform="Head" transform_path="lightSource"/> <triggered_effect trigger="onSelfBuffRemove" action="RemovePart" part="turretLight"/> <triggered_effect trigger="onSelfBuffRemove" action="SetTransformActive" active="false"/> </effect_group> </buff> </append>   <append xpath="/buffs"><buff name="delayFix_lights" hidden="true"><stack_type value="ignore"/><duration value="0.99"/></buff></append> <append xpath="/buffs"><buff name="delayFix2_lights" hidden="true"><stack_type value="ignore"/><duration value="0.1"/></buff></append> </eihwaz.de>